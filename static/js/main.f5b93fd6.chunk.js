(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){e.exports={overlay:"modal_overlay__1wE_G",modal:"modal_modal__32dlb"}},17:function(e,t,a){e.exports={imageItem:"imageItems_imageItem__Y8QIP",imageGalleryItem_image:"imageItems_imageGalleryItem_image__1eovL"}},18:function(e,t,a){e.exports={button:"button_button__16TUy",buttonClick:"button_buttonClick__gSVOe"}},29:function(e,t,a){e.exports={imageGallery:"imageGallery_imageGallery__2gK2m"}},37:function(e,t,a){},6:function(e,t,a){e.exports={searchBar:"searchbar_searchBar__1eu0W",searchForm:"searchbar_searchForm__1A668",searchForm_button:"searchbar_searchForm_button__2sI_G",searchForm_button_label:"searchbar_searchForm_button_label__3MDvh",searchForm_input:"searchbar_searchForm_input__fUKIb"}},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),o=(a(37),a(5)),i=a.n(o),l=a(19),u=a(8),m=a(9),h=a(10),d=a(12),b=a(11),g=a(7),j=a.n(g),p=a(3),f=(a(20),a(16)),_=a.n(f),v=a(1),y=document.querySelector("#modal-root"),O=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.largeImageURL;return Object(c.createPortal)(Object(v.jsx)("div",{className:_.a.overlay,onClick:this.handleBackdropClick,children:Object(v.jsx)("div",{className:_.a.modal,children:Object(v.jsx)("img",{src:e,alt:""})})}),y)}}]),a}(n.Component),x=a(6),S=a.n(x);function w(e){var t=e.onSearch;return Object(v.jsx)("header",{className:S.a.searchBar,children:Object(v.jsxs)("form",{className:S.a.searchForm,onSubmit:function(e){e.preventDefault(),""!==e.target.elements.searchQuery.value.trim()?(t(e.target.elements.searchQuery.value.toLowerCase().trim()),e.target.elements.searchQuery.value=""):p.b.info("Please, enter query!")},children:[Object(v.jsx)("button",{type:"submit",className:S.a.searchForm_button,children:Object(v.jsx)("span",{className:S.a.searchForm_button_label,children:"Search"})}),Object(v.jsx)("input",{name:"searchQuery",className:S.a.searchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var k=a(29),C=a.n(k),I=a(17),N=a.n(I);function F(e){var t=e.webformatURL,a=e.largeImageURL,n=e.onClick;return Object(v.jsx)("li",{className:N.a.imageItem,onClick:function(){return n(a)},children:Object(v.jsx)("img",{src:t,alt:"",className:N.a.imageGalleryItem_image})})}function L(e){var t=e.images,a=e.imageSelected;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("ul",{className:C.a.imageGallery,children:t.map((function(e){return Object(v.jsx)(F,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,onClick:a},e.id)}))})})}var U,Q=a(30),G=a(15),R=a(31),D=a.n(R),E=Object(G.css)(U||(U=Object(Q.a)(["\n  display: flex;\n  margin: 0 auto;\n  border-color: red;\n"])));var B=function(){return Object(v.jsx)(D.a,{color:"#3f51b5",loading:Object(n.useState)(!0),css:E,size:220})},P=a(18),q=a.n(P);function K(e){var t=e.onClick;return Object(v.jsx)("div",{className:q.a.button,children:Object(v.jsx)("button",{className:q.a.buttonClick,type:"button",onClick:t,children:"Load more"})})}var M=a(32),A=a.n(M),T=function(){var e=Object(u.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"22317274-5f5939ff79d612c3aacb02224",e.abrupt("return",A.a.get("https://pixabay.com/api/?q=".concat(t,"&page=").concat(a,"&key=").concat("22317274-5f5939ff79d612c3aacb02224","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:"",images:[],page:1,imageSelected:"",status:"idle"},e.handleChange=function(t){e.state.searchQuery!==t?(e.resetState(),e.setState({searchQuery:t})):p.b.info("Please, enter new query!")},e.resetState=function(){e.setState({searchQuery:"",page:1,imageSelected:null,images:[],status:"idle"})},e.toggleModal=function(){e.setState((function(e){return{imageSelected:!e.imageSelected}}))},e.incrementPage=function(){e.setState({page:e.state.page+1})},e.handleSelectedImage=function(t){e.setState({imageSelected:t})},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.searchQuery,c=n.page,a.searchQuery===r&&a.page===c){e.next=17;break}return this.setState({status:"pending"}),e.prev=3,e.next=6,T(r,c);case 6:if((s=e.sent).length){e.next=9;break}throw new Error;case 9:this.setState((function(e){return{images:[].concat(Object(l.a)(e.images),Object(l.a)(s)),status:"resolved"}})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),this.setState({status:"rejected"}),p.b.warning("Not found any images by query: ".concat(r));case 16:c>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 17:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.images,a=e.imageSelected,n=e.status;return"idle"===n?Object(v.jsx)("div",{className:j.a.container,children:Object(v.jsx)(w,{onSearch:this.handleChange})}):"pending"===n?Object(v.jsxs)("div",{className:j.a.container,children:[Object(v.jsx)(w,{onSearch:this.handleChange}),Object(v.jsx)(B,{})]}):"resolved"===n?Object(v.jsxs)("div",{className:j.a.container,children:[Object(v.jsx)(w,{onSearch:this.handleChange}),Object(v.jsx)(L,{images:t,imageSelected:this.handleSelectedImage}),t.length>0&&Object(v.jsx)(K,{onClick:this.incrementPage}),a&&Object(v.jsx)(O,{largeImageURL:a,onClose:this.toggleModal}),Object(v.jsx)(p.a,{autoClose:3e3})]}):"rejected"===n?Object(v.jsxs)("div",{className:j.a.container,children:[Object(v.jsx)(w,{onSearch:this.handleChange}),Object(v.jsx)(p.a,{autoClose:3e3})]}):void 0}}]),a}(n.Component);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root"))},7:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.f5b93fd6.chunk.js.map